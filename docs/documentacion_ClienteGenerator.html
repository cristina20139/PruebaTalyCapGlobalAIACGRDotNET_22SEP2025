<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Documentación - ClienteGenerator</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #fafbfc; color: #23272f; margin: 0; padding: 0; }
    .container { max-width: 850px; margin: 40px auto; background: #fff; box-shadow: 0 8px 32px rgba(0,0,0,0.08); border-radius: 10px; padding: 32px 40px; }
    h1 { color: #1565c0; }
    h2 { color: #2e7d32; margin-top: 32px; }
    h3 { color: #7b1fa2; margin-top: 24px; }
    ul, li { margin-bottom: 8px; }
    code, pre { background: #f3f3f7; padding: 3px 7px; border-radius: 4px; font-size: 1em; color: #222; }
    .note { background: #e3f2fd; border-left: 4px solid #1976d2; padding: 12px 18px; margin: 18px 0; border-radius: 5px; }
    .important { background: #fffde7; border-left: 4px solid #fbc02d; padding: 12px 18px; margin: 18px 0; border-radius: 5px; }
    .example { background: #fce4ec; border-left: 4px solid #c2185b; padding: 12px 18px; margin: 18px 0; border-radius: 5px; font-family: monospace; }
    .footer { text-align: right; color: #888; font-size: 1em; margin-top: 40px; }
    @media (max-width: 600px) { .container { padding: 16px 8px; } }
  </style>
</head>
<body>
  <div class="container">
    <h1>📄 ClienteGenerator</h1>
    <p><strong>Paquete:</strong> <code>com.clinicos.backend.utility</code></p>

    <div class="note">
      <p>🔹 <strong>Descripción:</strong><br>
      Clase responsable de <b>generar datos ficticios de clientes</b> para pruebas y semillas de base de datos.  
      Usa <code>Random</code> para crear nombres, apellidos, direcciones y teléfonos aleatorios.  
      Se conecta con <code>ClienteService</code> para registrar clientes en la base de datos.</p>
    </div>

    <h2>🏛️ Arquitectura Hexagonal</h2>
    <ul>
      <li>📌 Actúa como un <b>adaptador secundario</b> que genera datos de entrada para el dominio.</li>
      <li>📌 Invoca al servicio de aplicación <code>ClienteService</code>, que a su vez delega en el repositorio.</li>
      <li>📌 Permite poblar la base de datos sin necesidad de dependencias externas.</li>
    </ul>

    <h2>✨ Principios SOLID</h2>
    <ul>
      <li>🔹 <b>SRP (Single Responsibility):</b> única responsabilidad → generar clientes de prueba.</li>
      <li>🔹 <b>OCP (Open/Closed):</b> configurable vía <code>application.properties</code> sin modificar el código.</li>
      <li>🔹 <b>DIP (Dependency Inversion):</b> depende de <code>ClienteService</code> (abstracción de dominio), no de la infraestructura.</li>
    </ul>

    <h2>⚙️ Configuración</h2>
    <ul>
      <li><code>clientes.seed.enabled</code> → habilita o deshabilita la generación automática.</li>
      <li><code>clientes.seed.cantidad</code> → número de clientes a generar (default: 1000).</li>
    </ul>

    <h2>🛠️ Método principal</h2>
    <h3>🔹 generarClientes</h3>
    <div class="important">
      <p>Genera clientes ficticios y los registra en la base de datos.</p>
      <ul>
        <li>🔸 Usa listas de <b>nombres</b>, <b>apellidos</b> y <b>ciudades</b> predefinidas.</li>
        <li>🔸 Genera:
          <ul>
            <li>Tipo de documento (C = Cédula, P = Pasaporte).</li>
            <li>Número aleatorio de documento entre 10M y 99M.</li>
            <li>Nombres y apellidos combinados.</li>
            <li>Teléfonos móviles simulados.</li>
            <li>Direcciones ficticias.</li>
            <li>Ciudad de residencia.</li>
          </ul>
        </li>
        <li>🔸 Inserta cada cliente usando <code>clienteService.crearCliente()</code>.</li>
        <li>🔸 Muestra mensajes en consola:  
          <ul>
            <li>⚡ si está deshabilitado.</li>
            <li>✅ al completar la carga de datos.</li>
          </ul>
        </li>
      </ul>
    </div>

    <h2>💻 Código Fuente</h2>
    <pre><code>
@Component
public class ClienteGenerator {

    private final ClienteService clienteService;
    private final Random random = new Random();

    @Value("${clientes.seed.enabled:false}")
    private boolean seedEnabled;

    @Value("${clientes.seed.cantidad:1000}")
    private int cantidad;

    // Listas de datos ficticios
    private final String[] tiposDocumento = {"C", "P"};
    private final String[] nombres = {"Sofía","Valentina","Isabella","Camila","María", ...};
    private final String[] apellidos = {"Gómez","Rodríguez","López","Martínez","Pérez", ...};
    private final String[] ciudades = {"Bogotá","Medellín","Cali","Barranquilla","Cartagena", ...};

    public ClienteGenerator(ClienteService clienteService) {
        this.clienteService = clienteService;
    }

    public void generarClientes() {
        if (!seedEnabled) {
            System.out.println("⚡ Generación de clientes deshabilitada por configuración");
            return;
        }

        for (int i = 1; i &lt;= cantidad; i++) {
            String tipoDocumento = tiposDocumento[random.nextInt(tiposDocumento.length)];
            long numeroDocumento = 10000000L + random.nextInt(90000000);

            String primerNombre = nombres[random.nextInt(nombres.length)];
            String segundoNombre = nombres[random.nextInt(nombres.length)];

            String primerApellido = apellidos[random.nextInt(apellidos.length)];
            String segundoApellido = apellidos[random.nextInt(apellidos.length)];

            String telefono = String.format("%03d-%07d", 300 + random.nextInt(1000), random.nextInt(10000000));
            String direccion = "Calle " + (random.nextInt(150) + 1) + " # " + (random.nextInt(100) + 1) + "-" + (random.nextInt(50) + 1);
            String ciudad = ciudades[random.nextInt(ciudades.length)];

            Cliente cliente = new Cliente(tipoDocumento, numeroDocumento, primerNombre, segundoNombre,
                                          primerApellido, segundoApellido, telefono, direccion, ciudad);

            clienteService.crearCliente(cliente);
        }

        System.out.println("✅ Se han generado " + cantidad + " registros de prueba en la tabla Clientes");
    }
}
    </code></pre>

    <div class="footer">📘 Documentación generada automáticamente</div>
  </div>
</body>
</html>
